<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>

<!-- PAGINATION FRAGMENT -->
<div th:fragment="pagination"
     th:if="${pageMeta != null and pageMeta.totalPages() > 1}"
     class="px-6 py-4 border-t border-light-action-secondary dark:border-dark-action-secondary
            flex flex-col sm:flex-row items-center justify-between gap-3 transition-colors duration-300">

  <!-- RESULT SUMMARY SECTION -->
  <!-- Shows current page and total records count -->
  <p class="text-sm text-light-fg-secondary dark:text-dark-fg-secondary transition-colors duration-300 order-2 sm:order-1"
     th:text="#{admin.pagination.summary(${pageMeta.currentPage() + 1}, ${pageMeta.totalPages()}, ${pageMeta.totalElements()})}">
    Page <span class="font-semibold">1</span> of <span class="font-semibold">1</span> &mdash; <span class="font-semibold">0</span> total records
  </p>

  <!-- PAGE NAVIGATION CONTROLS -->
  <div class="flex items-center gap-1 order-1 sm:order-2">

    <!--
      FIRST PAGE BUTTON
      Only shown if not on first page
      Navigates to page 0 (zero-based index)
    -->
    <a th:if="${pageMeta.currentPage() > 1}"
       th:href="${baseUrl + '?page=0' + extraParams}"
       class="p-2 rounded-lg bg-light-action-secondary dark:bg-dark-action-secondary hover:text-accent transition-all duration-300"
       th:title="#{admin.pagination.first}">
      <ion-icon name="play-skip-back-outline" class="text-base block"></ion-icon>
    </a>

    <!--
      PREVIOUS PAGE BUTTON
      Active state: shown when previous page exists
      Disabled state: shown when on first page (no previous)
    -->
    <a th:if="${pageMeta.hasPrevious()}"
       th:href="${baseUrl + '?page=' + (pageMeta.currentPage() - 1) + extraParams}"
       class="p-2 rounded-lg bg-light-action-secondary dark:bg-dark-action-secondary hover:text-accent transition-all duration-300"
       th:title="#{admin.pagination.previous}">
      <ion-icon name="chevron-back-outline" class="text-base block"></ion-icon>
    </a>
    <span th:if="${!pageMeta.hasPrevious()}"
          class="p-2 rounded-lg opacity-40 cursor-not-allowed bg-light-action-secondary dark:bg-dark-action-secondary transition-colors duration-300"
          th:title="#{admin.pagination.noPrevious}">
      <ion-icon name="chevron-back-outline" class="text-base block"></ion-icon>
    </span>

    <!--
      PAGE NUMBER BUTTONS
      Dynamically generates page numbers based on startPage and endPage from pageMeta
      Current page is highlighted with accent color
      Other pages are clickable links
    -->
    <th:block th:each="i : ${#numbers.sequence(pageMeta.startPage(), pageMeta.endPage())}">
      
      <!-- Non-current page (clickable) -->
      <a th:if="${i != pageMeta.currentPage()}"
         th:href="${baseUrl + '?page=' + i + extraParams}"
         th:text="${i + 1}"
         class="w-9 h-9 flex items-center justify-center rounded-lg text-sm
                bg-light-action-secondary dark:bg-dark-action-secondary
                hover:text-accent transition-all duration-300"
         th:title="#{admin.pagination.goToPage(${i + 1})}">1</a>
      
      <!-- Current page (highlighted, non-clickable) -->
      <span th:if="${i == pageMeta.currentPage()}"
            th:text="${i + 1}"
            class="w-9 h-9 flex items-center justify-center rounded-lg text-sm
                   font-semibold bg-accent text-white"
            th:title="#{admin.pagination.currentPage(${i + 1})}">1</span>
    </th:block>

    <!--
      NEXT PAGE BUTTON
      Active state: shown when next page exists
      Disabled state: shown when on last page (no next)
    -->
    <a th:if="${pageMeta.hasNext()}"
       th:href="${baseUrl + '?page=' + (pageMeta.currentPage() + 1) + extraParams}"
       class="p-2 rounded-lg bg-light-action-secondary dark:bg-dark-action-secondary hover:text-accent transition-all duration-300"
       th:title="#{admin.pagination.next}">
      <ion-icon name="chevron-forward-outline" class="text-base block"></ion-icon>
    </a>
    <span th:if="${!pageMeta.hasNext()}"
          class="p-2 rounded-lg opacity-40 cursor-not-allowed bg-light-action-secondary dark:bg-dark-action-secondary transition-colors duration-300"
          th:title="#{admin.pagination.noNext}">
      <ion-icon name="chevron-forward-outline" class="text-base block"></ion-icon>
    </span>

    <!--
      LAST PAGE BUTTON
      Only shown if more than 2 pages away from last page
      Navigates to the last page (totalPages - 1 in zero-based index)
    -->
    <a th:if="${pageMeta.currentPage() < pageMeta.totalPages() - 2}"
       th:href="${baseUrl + '?page=' + (pageMeta.totalPages() - 1) + extraParams}"
       class="p-2 rounded-lg bg-light-action-secondary dark:bg-dark-action-secondary hover:text-accent transition-all duration-300"
       th:title="#{admin.pagination.last}">
      <ion-icon name="play-skip-forward-outline" class="text-base block"></ion-icon>
    </a>

  </div>
</div>

</body>
</html>