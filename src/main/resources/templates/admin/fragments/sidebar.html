<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- SIDEBAR FRAGMENT -->
<div th:fragment="sidebar">
  
  <!-- Sidebar Container -->
  <aside class="admin-sidebar fixed inset-0 lg:left-0 lg:top-0 lg:w-64 lg:h-full bg-light-bg-primary dark:bg-dark-bg-primary shadow-lg z-40 transform -translate-x-full lg:translate-x-0 transition-all duration-300 overflow-auto">
    
    <!-- Sidebar Content -->
    <div class="p-6">
      
      <!-- Header Section with Logo and Title -->
      <div class="flex items-center justify-between mb-8">
        
        <!-- Logo and Title Container -->
        <div class="w-full lg:w-auto text-center lg:text-left mb-8 lg:mb-0">
          
          <!--
            Logo with light/dark mode support
            Uses different SVG files for light and dark themes
          -->
          <a th:href="@{/}">
            <img th:src="@{/svg/logo-light.svg}" 
                 th:alt="#{meta.title}" 
                 width="150" 
                 height="40" 
                 class="logo-light dark:hidden">
            <img th:src="@{/svg/logo-dark.svg}" 
                 th:alt="#{meta.title}" 
                 width="150" 
                 height="40" 
                 class="logo-dark hidden dark:block">
          </a>
          
          <!-- Admin Panel Title -->
          <h1 class="text-3xl font-bold text-accent mb-2 mt-4 transition-colors duration-300" 
              th:text="#{admin.sidebar.title}">Admin Panel</h1>
        </div>

        <!--
          Mobile Close Button
          Only visible on mobile (lg:hidden)
          Closes the sidebar when clicked
        -->
        <button class="admin-sidebar-close-btn lg:hidden absolute top-5 right-5 w-10 h-10 flex justify-center items-center bg-light-action-secondary dark:bg-dark-action-secondary text-light-fg-tertiary dark:text-dark-fg-tertiary rounded-full text-2xl hover:bg-accent hover:text-white transition-all">
          <ion-icon name="close-outline"></ion-icon>
        </button>
      </div>

      <!-- Navigation Menu -->
      <nav>
        <ul class="space-y-2">
          
          <!-- Dashboard Navigation Item -->
          <li>
            <!--
                HTMX: Dashboard link
              - hx-get       : GET request to load dashboard
              - hx-target    : Swap HTML into main content area
              - hx-swap      : Replace entire content of target
              - hx-push-url  : Update browser URL
            -->
            <a hx-get="/admin/dashboard"
               hx-target="#main-content"
               hx-swap="innerHTML"
               hx-push-url="true"
               class="flex items-center gap-3 px-4 py-3 rounded-lg text-light-fg-secondary dark:text-dark-fg-secondary hover:bg-light-action-secondary dark:hover:bg-dark-action-secondary hover:text-accent transition-colors duration-300">
              <ion-icon name="grid-outline" class="text-xl transition-colors duration-300"></ion-icon>
              <span class="transition-colors duration-300" th:text="#{admin.sidebar.dashboard}">Dashboard</span>
            </a>
          </li>

          <!-- Users Management Navigation Item -->
          <li>
            <!--
                HTMX: Users management link
              - hx-get       : GET request to load users list
              - hx-target    : Swap HTML into main content area
              - hx-swap      : Replace entire content of target
              - hx-push-url  : Update browser URL
              - th:classappend: Adds 'active' class when current section is 'users'
            -->
            <a hx-get="/admin/users"
               hx-target="#main-content"
               hx-swap="innerHTML"
               hx-push-url="true"
               th:classappend="${activeSection == 'users'} ? 'active bg-light-action-secondary dark:bg-dark-action-secondary text-accent' : ''"
               class="flex items-center gap-3 px-4 py-3 rounded-lg text-light-fg-secondary dark:text-dark-fg-secondary hover:bg-light-action-secondary dark:hover:bg-dark-action-secondary hover:text-accent transition-colors duration-300">
              <ion-icon name="people-outline" class="text-xl transition-colors duration-300"></ion-icon>
              <span class="transition-colors duration-300" th:text="#{admin.sidebar.users}">Users</span>
            </a>
          </li>
        </ul>
      </nav>

      <!-- Footer Section with Additional Links -->
      <div class="mt-8 pt-6 border-t border-light-action-primary dark:border-dark-action-primary transition-colors duration-300">
        
        <!-- View Website Link (opens in new tab) -->
        <a th:href="@{/}" 
           target="_blank"
           rel="noopener noreferrer"
           class="flex items-center gap-3 px-4 py-3 rounded-lg text-light-fg-secondary dark:text-dark-fg-secondary hover:bg-light-action-secondary dark:hover:bg-dark-action-secondary hover:text-accent transition-colors duration-300">
          <ion-icon name="eye-outline" class="text-xl transition-colors duration-300"></ion-icon>
          <span class="transition-colors duration-300" th:text="#{admin.sidebar.viewWebsite}">View Website</span>
        </a>
      </div>
    </div>
  </aside>
</div>

</body>
</html>